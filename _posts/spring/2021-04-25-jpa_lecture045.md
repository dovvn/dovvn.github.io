---
title:  "[JPA] JPA í”„ë¡œê·¸ë˜ë° ê¸°ë³¸ê¸° ë‹¤ì§€ê¸° 4~5ê°• - ì—°ê´€ê´€ê³„ ë§¤í•‘"
excerpt: "ì—°ê´€ê´€ê³„ ë§¤í•‘(ë‹¨ë°©í–¥, ì–‘ë°©í–¥)"  
permalink: /categories/spring/jpa_lecture045
author_profile: true
categories:
  - Spring
tags:
  - JPA
toc: true
toc_label: "ëª©ì°¨"
toc_icon: "bookmark"
last_modified_at: 2021-04-25
toc: true
toc_sticky: true
---   

ì´ë²ˆ í¬ìŠ¤íŠ¸ëŠ” JPAì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ìœ¼ë¡œ **"ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ ì–´ë–»ê²Œ ë§¤í•‘ë˜ëŠ”ì§€"**ë¥¼ ì •ë¦¬í•˜ì˜€ë‹¤.    

# ğŸ’¡ë“¤ì–´ê°€ê¸° ì „...
## âœ”ê°ì²´ë¥¼ í…Œì´ë¸”ì— ë§ì¶”ì–´ ëª¨ë¸ë§í•œë‹¤ë©´?  
> ì™¸ë˜ í‚¤ ì‹ë³„ìë¥¼ ì§ì ‘ ë‹¤ë£¸  

### ì—°ê´€ê´€ê³„ê°€ ì—†ëŠ” ê°ì²´  
![jpaimage](/assets/images/jpaimage.png)  
* íšŒì›ê³¼ íŒ€ì´ ìˆë‹¤.
* íšŒì›ì€ í•˜ë‚˜ì˜ íŒ€ì—ë§Œ ì†Œì†ë  ìˆ˜ ìˆë‹¤.  
* íšŒì›ê³¼ íŒ€ì€ ë‹¤ëŒ€ì¼ ê´€ê³„ì´ë‹¤.  

### ì°¸ì¡° ëŒ€ì‹ ì— ì™¸ë˜í‚¤ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©   
```java
@Entity
public class Member {

    @Id @GeneratedValue
    private Long id;
    
    @Column(name = "USERNAME")
    private String name;
    private int age;
    
    @Column(name ="TEAM_ID")
    private Long teamId;
    ...
}

@Entity
public class Team {
    
    @Id @GeneratedValue
    private Long id;
    private String name;
}
```    

### ì™¸ë˜í‚¤ ì‹ë³„ìë¥¼ ì§ì ‘ ë‹¤ë£¸  
```java
//íŒ€ì €ì¥
Team team = new Team();
team.setName("TeamA");
em.persist(team);

//íšŒì›ì €ì¥
Member member = new Member();
member.setName("member1");
member.setTeamId(team.getId());
em.persist(member);
```  

### ì‹ë³„ìë¡œ ë‹¤ì‹œ ì¡°íšŒ, ê°ì²´ ì§€í–¥ì ì¸ ë°©ë²•ì´ ì•„ë‹ˆë‹¤.
```java
//ì¡°íšŒ
Member findMember = em.find(Member.class, member.getId());

//ì—°ê´€ê´€ê³„ê°€ ì—†ìŒ
Team findTeam = em.find(Team.class, team.getId());
```  
* `member`ë¥¼ ì¡°íšŒí•´ì™”ìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , `member`ê°€ ì†í•œ íŒ€ì„ ì•Œê¸° ìœ„í•´ì„œëŠ” ë˜ `member`ê°€ ê°€ì§„ `team_id(FK)`ë¡œ í…Œì´ë¸”ì„ ê²€ìƒ‰í•´ì„œ ê°€ì ¸ì™€ì•¼ í•œë‹¤.  
* ì—°ê´€ ê´€ê³„ê°€ ì—†ê¸° ë•Œë¬¸, ê°ì²´ ì§€í–¥ìŠ¤ëŸ½ì§€ ì•Šì€ ë°©ì‹  

### ê°ì²´ë¥¼ í…Œì´ë¸”ì— ë§ì¶”ì–´ ë°ì´í„° ì¤‘ì‹¬ìœ¼ë¡œ ëª¨ë¸ë§í•˜ë©´, í˜‘ë ¥ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë‹¤.  
* **í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ë¡œ ì¡°ì¸**ì„ ì‚¬ìš©í•´ì„œ ì—°ê´€ëœ í…Œì´ë¸”ì„ ì°¾ëŠ”ë‹¤.  
* ê·¸ëŸ¬ë‚˜ **ê°ì²´ ì…ì¥ì—ì„œëŠ” ì°¸ì¡°**ë¥¼ ì‚¬ìš©í•´ì„œ ì—°ê´€ëœ ê°ì²´ë¥¼ ì°¾ëŠ”ë‹¤.
* *í…Œì´ë¸”ê³¼ ê°ì²´ ì‚¬ì´ì—ëŠ” ì´ëŸ° í° ê°„ê²©ì´ ìˆë‹¤.*  

<br/>

## âœ”ë°ì´í„° ì¤‘ì‹¬(í…Œì´ë¸” ì¤‘ì‹¬) ì„¤ê³„ì˜ ë¬¸ì œì   
* í˜„ì¬ ë°©ì‹ì€ ê°ì²´ ì„¤ê³„ë¥¼ í…Œì´ë¸” ì„¤ê³„ì— ë§ì¶˜ ë°©ì‹
* í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¥¼ ê°ì²´ì— ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¨ë‹¤.
* ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰ì´ ë¶ˆê°€ëŠ¥  

ì¦‰, JPAì˜ ëª©ì ì€ ìœ„ ì‚¬ë¡€ì™€ ê°™ì´ "ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì´ì˜ íŒ¨ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°"í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì€ ì—°ê´€ê´€ê³„ ë§¤í•‘ì„ ì´í•´í•´ì•¼ í•œë‹¤.   

<br/>

# ğŸ’¡ì—°ê´€ê´€ê³„ ë§¤í•‘ 
## âœ”ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„  
### ê°ì²´ ì§€í–¥ ëª¨ë¸ë§
> ê°ì²´ ì—°ê´€ê´€ê³„ ì‚¬ìš©  

![jpaimage1](/assets/images/jpaimage1.png)    
* Teamì˜ Idê°€ ì•„ë‹Œ Teamì˜ ì°¸ì¡°ê°’ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¨ë‹¤.
* MemberëŠ” Teamì„ ì°¸ì¡°í•  ìˆ˜ ìˆì§€ë§Œ, Teamì€ Memeberì„ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤. 
* Memberê°ì²´ì˜ Teamë ˆí¼ëŸ°ìŠ¤ì™€ Memberí…Œì´ë¸”ì˜ TEAM_ID(FK)ë¥¼ ë§¤í•‘í•´ì•¼ í•œë‹¤.   

### ê°ì²´ì˜ ì°¸ì¡°ì™€ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¥¼ ë§¤í•‘  
```java
@Entity 
public class Member {
   
   @Id @GeneratedValue
   private Long id;
   
   @Column(name = "USERNAME")
   private String name;
   private int age;
   
   //@Column(name = "TEAM_ID")
   //private Long teamId;
   
   @ManyToOne
   @JoinColumn(name = "TEAM_ID")
   private Team team;
   ...
}
```  
* `@ManyToOne`: ì—°ê´€ê´€ê³„ê°€ ë¬´ì—‡ì¸ì§€(ë‹¤ëŒ€ì¼), `@JoinColumn`: ì´ ê´€ê³„ë¥¼ ì •ì˜í•  ë•Œ ì¡°ì¸í•˜ëŠ” ì»¬ëŸ¼ì´ ë¬´ì—‡ì¸ì§€ ì ì–´ì¤€ë‹¤.  

### ORM ë§¤í•‘  
![jpaimage2](/assets/images/jpaimage2.png)    

### ì—°ê´€ê´€ê³„ ì €ì¥  
```java
//íŒ€ ì €ì¥
Team team = new Team();
team.setName("TeamA");
em.persist(team);

//íšŒì› ì €ì¥
Member member = new Member();
member.setName("member1");
member.setTeam(team); //ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ ì„¤ì •, ì°¸ì¡° ì €ì¥
em.persist(member);
```  
* memberì— teamì°¸ì¡°ë¥¼ ì €ì¥í•˜ë©´, JPAê°€ DBì— ì—”í‹°í‹° ì €ì¥í•  ë•Œ ì•Œì•„ì„œ teamì—”í‹°í‹°ì—ì„œ PKê°’ì„ êº¼ë‚´ì„œ Memberí…Œì´ë¸”ì˜ FKì»¬ëŸ¼ì— ì €ì¥í•œë‹¤.  


### ì°¸ì¡°ë¡œ ì—°ê´€ê´€ê³„ ì¡°íšŒ - ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰  
```java
//ì¡°íšŒ
Member findMember = em.find(Member.class, member.getId());

//ì°¸ì¡°ë¥¼ ì‚¬ìš©í•´ì„œ ì—°ê´€ê´€ê³„ ì¡°íšŒ
Team findTeam = findMember.getTeam();
```   

### ì—°ê´€ê´€ê³„ ìˆ˜ì •
```java  
//ìƒˆë¡œìš´ íŒ€ B
Team teamB = new Team();
teamB.setName("TeamB");
em.persist(teamB);

//íšŒì›1ì— ìƒˆë¡œìš´ íŒ€B ì„¤ì •
member.setTeam(teamB);
```    

<br/>  

## âœ”ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„  
### ì–‘ë°©í–¥ ë§¤í•‘  
![jpaimage3](/assets/images/jpaimage3.png)   
* í…Œì´ë¸” ì—°ê´€ê´€ê³„ëŠ” ê·¸ëŒ€ë¡œì„. ì™œëƒë©´ í…Œì´ë¸”ì€ ì¡°ì¸í•´ì„œ ì—°ê´€ê´€ê³„ë¥¼ ë§Œë“¤ê¸° ë•Œë¬¸ì— ì™¸ë˜í‚¤ í•˜ë‚˜ì— ì–‘ë°©í–¥ì´ ë‹¤ ìˆìŒ.
* í•˜ì§€ë§Œ ê°ì²´ëŠ” ì°¸ì¡°ë¥¼ í†µí•´ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•˜ê¸° ë•Œë¬¸ì— Teamì—ì„œ memberë¡œ ê°€ë ¤ë©´ Teamì—ë„ memberì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë„£ì–´ì¤˜ì•¼ í•œë‹¤.  

### Memberì—”í‹°í‹°ëŠ” ë‹¨ë°©í–¥ê³¼ ë™ì¼, Teamì—”í‹°í‹°ëŠ” ì»¬ë ‰ì…˜ ì¶”ê°€  
```java
@Entity
public class Team {
    
    @Id @GeneratedValue
    private Long id;
    
    private String name;
    
    //ArrayListë¡œ ì´ˆê¸°í™”í•´ë‘ëŠ” ê²ƒì€ ê´€ë¡€ (addí•  ë•Œ NPE ì•ˆëœ¨ë‹ˆê¹Œ)
    @OneToMany(mappedBy = "team")
    List<Member> members = new ArrayList<Member>();
    ...
}
```  

### ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰  
```java
//ì¡°íšŒ
Team findTeam = em.find(Team.class, team.getId());  
int memberSize = findTeam.getMembers().size().size(); //ì—­ë°©í–¥ ì¡°íšŒ
```  

<br/>  

## âœ”ì—°ê´€ê´€ê³„ ì£¼ì¸ê³¼ mappedBy
> ê°ì²´ì™€ í…Œì´ë¸” ê°„ì— ì—°ê´€ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.  

### ê°ì²´ì™€ í…Œì´ë¸”ì´ ì—°ê´€ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´  
* **ê°ì²´ ì—°ê´€ê´€ê³„ = 2ê°œ**  
  * íšŒì› â†’ íŒ€ ì—°ê´€ê´€ê³„ 1ê°œ (ë‹¨ë°©í–¥)
  * íŒ€ â†’ íšŒì› ì—°ê´€ê´€ê³„ 1ê°œ (ë‹¨ë°©í–¥)
  * ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ê°€ 2ê°œ ìˆëŠ” ê²ƒì´ë‹¤. ì´ê²ƒì„ ìš°ë¦¬ëŠ” ì–µì§€ë¡œ ì–‘ë°©í–¥ì´ë¼ê³  ë¶€ë¥´ê³  ìˆëŠ” ê²ƒ.
  * ê°ì²´ ì„¸ìƒì—ì„œëŠ” ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ë§ºìœ¼ë ¤ë©´, ì°¸ì¡°ê°€ ì–‘ìª½ ê°ì²´ì— ìˆì–´ì•¼í•œë‹¤.
* **í…Œì´ë¸” ì—°ê´€ê´€ê³„ = 1ê°œ**
  * íšŒì› â†” íŒ€ ì—°ê´€ê´€ê³„ 1ê°œ (ì–‘ë°©í–¥, ì‚¬ì‹¤ ë°©í–¥ì´ ì—†ëŠ” ê²ƒ)
  * ì™¸ë˜í‚¤ ê°’ í•˜ë‚˜ë¡œ í…Œì´ë¸”ì„ ì¡°ì¸í•˜ë©´ ì–‘ìª½ì˜ ì—°ê´€ê´€ê³„ê°€ ëì´ë‚œë‹¤.  

### ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„  
* ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì‚¬ì‹¤ ì–‘ë°©í–¥ ê´€ê³„ê°€ ì•„ë‹ˆë¼ **ì„œë¡œ ë‹¤ë¥¸ ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œ**ì´ë‹¤.  
* ê°ì²´ë¥¼ ì–‘ë°©í–¥ìœ¼ë¡œ ì°¸ì¡°í•˜ë ¤ë©´ **ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ 2ê°œ**ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.  
![jpaimage4](/assets/images/jpaimage4.png)    

### í…Œì´ë¸”ì˜ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„  
* í…Œì´ë¸”ì€ **ì™¸ë˜í‚¤ í•˜ë‚˜**ë¡œ ë‘ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬í•œë‹¤.  
* MEMBER.TEAM_ID ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ê°€ì§„ë‹¤(ì–‘ìª½ìœ¼ë¡œ **ì¡°ì¸**í•  ìˆ˜ ìˆë‹¤.)  

```sql
SELECT *
FROM MEMBER M
JOIN TEAM T ON M.TEAM_ID = T.TEAM_ID;

SELECT *
FROM TEAM T
JOIN MEMBER M ON T.TEAM_ID = M.TEAM_ID;
```    

### ë‘˜ ì¤‘ í•˜ë‚˜ë¡œ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•´ì•¼ í•œë‹¤.  
![jpaimage5](/assets/images/jpaimage5.png)   
* ê°ì²´ì—ëŠ” ë‘ ê°€ì§€ ì°¸ì¡°ê°’ì´ ìˆë‹¤.  
  * Member â†’ Team ì°¸ì¡°ê°’  
  * Team â†’ Member ì°¸ì¡°ê°’
* ë‘˜ ì¤‘ ì–´ë–¤ ê²ƒì´ë‘ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¥¼ ë§¤í•‘í•´ì•¼ í•˜ëŠ”ê°€?
  * Memberì— ìˆëŠ” teamê°’ì´ ë°”ë€Œì—ˆì„ ë•Œ ì™¸ë˜í‚¤ ê°’ì„ ì—…ë°ì´íŠ¸ í•´ì•¼ í• ê¹Œ  
  * Teamì— ìˆëŠ” Memberê°’ì´ ë°”ë€Œì—ˆì„ ë•Œ ì™¸ë˜í‚¤ ê°’ì„ ì—…ë°ì´íŠ¸ í•´ì•¼ í• ê¹Œ  
* ê·¸ëƒ¥ ë‘ ê°œì˜ ì°¸ì¡°ê°’ ë‹¤ ë§¤í•‘í•˜ë©´ ì•ˆë˜ë‚˜? 
  * ê·¹ë‹¨ì ìœ¼ë¡œ Memberì— ìˆëŠ” teamì—ëŠ” ê°’ì„ ë„£ê³ , Teamì— ìˆëŠ” membersì—ëŠ” ê°’ì„ ë„£ì§€ ì•ŠëŠ”ë‹¤ë©´?
  * ë°˜ëŒ€ë¡œ Memberì— ìˆëŠ” teamì€ ê°’ì„ ë„£ì§€ ì•Šê³ , Teamì— ìˆëŠ” membersì—ë§Œ ê°’ì„ ë„£ëŠ”ë‹¤ë©´?
  * ì•„ë‹ˆë©´ ë‘˜ ë‹¤ ê°’ì„ ë„£ëŠ”ë‹¤ë©´?
  * ë¬´ì—‡ì„ ê¸°ì¤€ìœ¼ë¡œ í•´ì•¼ í• ì§€ ëª¨ë¥¸ë‹¤(ë©˜ë¶•)  
* ë”°ë¼ì„œ ë‹¤ìŒ ê·œì¹™ì´ ìƒê²¼ë‹¤.
 * **ë‘˜ ì¤‘ í•˜ë‚˜ë¡œ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•´ì•¼ í•œë‹¤!!**
 * ê·¸ê²ƒì´ ë°”ë¡œ **ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸**  

### ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸(Owner)
* **ì–‘ë°©í–¥ ë§¤í•‘ ê·œì¹™**
  * ê°ì²´ì˜ **ë‘ ê´€ê³„ ì¤‘ í•˜ë‚˜**ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •
  * ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œì´ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬(ë“±ë¡, ìˆ˜ì •)
  * ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì¡°íšŒ(ì½ê¸°)ë§Œ ê°€ëŠ¥
  * ì£¼ì¸ì€ `mappedBy`ì†ì„±ìœ¼ë¡œ ì‚¬ìš©X
  * ì£¼ì¸ì´ ì•„ë‹ˆë©´ `mappedBy`ì†ì„±ìœ¼ë¡œ ì£¼ì¸ ì§€ì •
* **ëˆ„êµ¬ë¥¼ ì£¼ì¸ìœ¼ë¡œ í• ê²ƒì¸ê°€?**
  * **ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³**ì„ ì£¼ì¸ìœ¼ë¡œ ì •í•´ë¼(ë‹¤ëŒ€ì¼ì—ì„œëŠ” 'ë‹¤'ìª½)
  * ì—¬ê¸°ì„œëŠ” `Member.team`ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸  
  ![jpaimage6](/assets/images/jpaimage6.png)   

> ì™œ ì™¸ë˜í‚¤ê°€ ìˆëŠ” ìª½ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ëŠ” ê²ƒì¸ê°€?   

* ì¼ë‹¨ ì™¸ë˜í‚¤ê°€ ìˆëŠ” ìª½ì˜ í…Œì´ë¸”ì— ëŒ€ì‘ë˜ëŠ” ì—”í‹°í‹°ì— ìˆëŠ” ì°¸ì¡°ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ëŠ” ê²ƒì´ í—·ê°ˆë¦¬ì§€ ì•ŠëŠ”ë‹¤.  
* ë§Œì•½ ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ì´ ì•„ë‹Œ Team.membersë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•œë‹¤ë©´, Teamì— ìˆëŠ” memberë¥¼ ìˆ˜ì •í–ˆëŠ”ë° updateì¿¼ë¦¬ëŠ” ë‹¤ë¥¸ í…Œì´ë¸”(MEMBER)ì— ë‚ ì•„ê°„ë‹¤
* ì„±ëŠ¥ ì´ìŠˆì˜ ì´ìœ ë„ ìˆë‹¤.   

> ì™¸ë˜í‚¤ê°€ ìˆëŠ” ìª½ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ë§ì€ ê²ƒë“¤ì´ í•´ê²°ëœë‹¤.  

*  DBì…ì¥ì—ì„œ ë‹¤ëŒ€ì¼ ê´€ê³„ì—ì„œ ì™¸ë˜í‚¤ê°€ ìˆëŠ” ìª½ì´ ë‹¤ì´ê³ , ì´ Nìª½ì´ ë¬´ì¡°ê±´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ëœë‹¤.
* ê°ì²´ì—ì„œëŠ” `@ManyToOne`, `@XXXtoOne` ìª½ì´ ë¬´ì¡°ê±´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ëœë‹¤.  
* ì—°ê´€ê´€ê³„ ì£¼ì¸ì€ ë¹„ì¦ˆë‹ˆìŠºë•ìœ¼ë¡œ í° ì˜ë¯¸ëŠ” ì—†ì§€ë§Œ ì„¤ê³„ìƒ ì™¸ë˜í‚¤ìˆëŠ” ìª½ì— ì—°ê´€ê´€ê³„ ì£¼ì¸ì´ ìˆì–´ì•¼ ì„¤ê³„ê°€ ê¹”ë”í•´ì§„ë‹¤.  

### ì–‘ë°©í–¥ ë§¤í•‘ ì‹œ ê°€ì¥ ë§ì´ í•˜ëŠ” ì‹¤ìˆ˜  
* **â—ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ì„ ì…ë ¥í•˜ì§€ ì•ŠìŒ**  
  ```java
  Team team = new Team();
  team.setName("TeamA");
  em.persist(team);

  Member member = new Member();
  member.setName("member1");

  //ì—­ë°©í–¥(ì£¼ì¸ì´ ì•„ë‹Œ ë°©í–¥)ë§Œ ì—°ê´€ê´€ê³„ ì„¤ì •
  team.getMembers().add(member);

  em.persist(member);
  ```  
  ![jpaimage7](/assets/images/jpaimage7.png)   
  * ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œì´ ì™¸ë˜í‚¤ ê°’ì„ ë“±ë¡, ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.  
  * ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì¡°íšŒë§Œ ê°€ëŠ¥í•˜ë‹¤.  
  * JPAì—ì„œ updateë‚˜ insertí•  ë•ŒëŠ” mappedBy ëœ ìª½ì€ ì•„ì˜ˆ ì•ˆë³¸ë‹¤.
  * mappedByëŠ” ê·¸ëƒ¥ ì½ê¸° ì „ìš©, ê°€ì§œ ë§¤í•‘ì¸ ê²ƒì´ë‹¤.  

* **â—ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ì„ ì…ë ¥í•¨**   
  ```java
  Team team = new Team();
  team.setName("TeamA");
  em.persist(team);

  Member member = new Member();
  member.setName("member1");

  team.getMembers().add(member);
  //ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ ì„¤ì •
  member.setTeam(team);

  em.persist(member);
  ```  
  ![jpaimage7](/assets/images/jpaimage7.png)   
  * ìˆœìˆ˜í•œ ê°ì²´ ê´€ê³„ë¥¼ ê³ ë ¤í•˜ë©´ í•­ìƒ **ì–‘ìª½ ë‹¤** ê°’ì„ ì…ë ¥í•´ì•¼ í•œë‹¤.  

  ### ì–‘ë°©í–¥ ë§¤í•‘ì˜ ì¥ì   
  * **ë‹¨ë°©í–¥ ë§¤í•‘ë§Œìœ¼ë¡œë„ ì´ë¯¸ ì—°ê´€ê´€ê³„ ë§¤í•‘ì€ ì™„ë£Œ**
  * ì–‘ë°©í–¥ ë§¤í•‘ì€ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ì¡°íšŒ(ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰) ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ê²ƒ ë¿
  * JPQLì—ì„œ ì—­ë°©í–¥ìœ¼ë¡œ íƒìƒ‰í•  ì¼ì´ ë§ìŒ
  * ë‹¨ë°©í–¥ ë§¤í•‘ì„ ì˜ í•˜ê³  ì–‘ë°©í–¥ì€ í•„ìš”í•  ë•Œ ì¶”ê°€í•´ë„ ë¨(í…Œì´ë¸”ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ)


<br/>  

## âœ”ì—°ê´€ê´€ê³„ ë§¤í•‘ ì–´ë…¸í…Œì´ì…˜  
* ë‹¤ëŒ€ì¼(@ManyToOne)
* ì¼ëŒ€ë‹¤(@OneToMany)
* ì¼ëŒ€ì¼(@OneToOne)
* ë‹¤ëŒ€ë‹¤(@ManyToMany)
* @JoinColumn, @JoinTable  

## âœ”ìƒì†ê´€ê³„ ë§¤í•‘ ì–´ë…¸í…Œì´ì…˜  
* @Inheritance
* @DiscriminatorColumn
* @DiscriminatorValue
* @MappedSuperclass(ë§¤í•‘ ì†ì„±ë§Œ ìƒì†)  

## âœ”ë³µí•¨í‚¤ ì–´ë…¸í…Œì´ì…˜
* @IdClass
* @EmbeddedId
* @Embeddable
* @MapsId